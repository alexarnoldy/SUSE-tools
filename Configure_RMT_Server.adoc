### State of document: Creating
### Purpose of document: To provide a quick deployment of the RMT server based on a limited set of parameters
#### Aspirations: Eventually, to containerize this work

#### References use: https://github.com/SUSE/rmt

#### Install the server and database
* Install and register the base O/S
* Activate the server applications module: `sudo SUSEConnect -p sle-module-server-applications/15.1/x86_64`
* Install RMT with YaST installation wizard: `sudo zypper --non-instactive install rmt-server yast2-rmt`
* Configure the RMT server: `sudo yast2 rmt`

#### Sync and mirror the needed repositories

TIP: Virtually all installations will need the "SUSE Linux Enterprise Server" and "Basesystem Module", for the appropriate version of SLES, to be enabled. Many applications will need the "Server Applications Module" to be enabled. Systems that need a desktop environment will need the Desktop Applications Module" to be enabled. Certain products, such as CaaS Platform, require other repositories to be enabled such as the "Containers Module". One way of ensuring the correct repositories are enabled is to run the command `sudo SUSEConnect -s | grep --color Registered` on a system that has the required application installed and registered correctly. Another way is to search for the word SUSEConnect in the application's installation and/or deployment guide.

TIP: Virtually all installations will need the "SUSE Linux Enterprise Server" and "Basesystem Module", for the appropriate version of SLES, to be enabled. Many applications will need the "Server Applications Module" to be enabled. Systems that need a desktop environment will need the Desktop Applications Module" to be enabled. Certain products, such as CaaS Platform, require other repositories to be enabled such as the "Containers Module". 

There are several ways of determining which repositories need to be enabled for an application:
* Run the command `sudo SUSEConnect -s | grep --color Registered` on a system that has the required application installed and registered correctly
* Search for the word SUSEConnect in the application's installation and/or deployment guide
* Start the installation of a SLES VM and, after registering SLES with the SUSE Customer Center, select the desired application. All additionally required repositories will be automatically selected

* Take note of the product  "ID" for all products to be mirrored locally: `sudo rmt-cli product list --all | less`

TIP: The same command can be used to verify which products are currently enabled to be mirrored and when they were last mirrored.

CAUTION: The third column in the output is the version of the software. Take care to mirror the versions of software that will be needed by the RMT clients.

IMPORTANT: The RMT server must be registered for all products to be mirrored.

* Enable mirroring for the desired products: `sudo rmt-cli product enable <space separated list of product IDs>`
* Synchronize the repository meta data from the SUSE Customer Center `sudo rmt-cli sync`
* Mirror the desired repositories to the RMT server `nohup sudo rmt-cli mirror`



// vim: set syntax=asciidoc:
